<head>
    <title>Realtime</title>
    <script>
        var ws = new WebSocket("ws://" + "localhost:8888" + "/ws");
        ws.onmessage = function(evt){
            var received_msg = evt.data;
            data_json = JSON.parse(received_msg)

            txt = ""
            txt += "<table border='1'>"
            txt += "<th>Host</th><th>Alive</th>"

            var hosts = [];
            for (i in data_json){
                hosts.push(i);
                status = ""
                if (data_json[i] == false){
                    status =  "<font color='red'>NO</font>"
                }else{
                    status =  "<font color='green'>YES</font>"
                }

            txt += "<tr><td>" + i + "</td><td>" + status + "</td></tr>";

            }
            txt += "</table>"
            document.getElementById("stream_data").innerHTML = txt;

            ws.send(hosts);
            }
        ws.onopen = function(){
            ws.send("connection established");
        }
    </script>

</head>

<body>
    <h1>- Ping Master -</h1>
    Hosts selected from /hosts file

    <form action="/submit_host" method="post">
    <div>
        <label for="ip">Host IP:</label>
        <input type="text" id="ip" name="host_ip">
    </div>

    <div id="stream_data">

    </div>
</form>
</body>
</html>